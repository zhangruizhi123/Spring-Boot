<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>菜鸟教程(runoob.com)</title>
<link href="/css/bootstrap.min.css" rel="stylesheet" media="screen" />
<link href="/css/bootstrap-datetimepicker.min.css" rel="stylesheet"
	media="screen" />
<link href="/css/bootstrap-table.min.css" rel="stylesheet"
	media="screen" />
<link href="/css/bootstrap-dialog.css" rel="stylesheet" media="screen" />

</head>
<body>
	<div class="container">
	
		<form action="" id="h3" style="display:none;">
			<div>
				<input  type="text"/>
			</div>
		</form>
		<form action="" class="form-horizontal" role="form">
			<fieldset>
				<legend>Test</legend>
				<div class="form-group">
					<label for="dtp_input1" class="col-md-2 control-label">DateTime
						Picking</label>
					<div class="input-group date form_datetime col-md-5"
						data-date="1979-09-16T05:25:07Z"
						data-date-format="dd MM yyyy - HH:ii p"
						data-link-field="dtp_input1">
						<input class="form-control" size="16" type="text" value=""
							readonly="" /> <span class="input-group-addon"><span
							class="glyphicon glyphicon-remove"></span></span> <span
							class="input-group-addon"><span
							class="glyphicon glyphicon-th"></span></span>
					</div>
					<input type="hidden" id="dtp_input1" value="" /><br />
				</div>
				<div class="form-group">
					<label for="dtp_input2" class="col-md-2 control-label">Date
						Picking</label>
					<div class="input-group date form_date col-md-5" data-date=""
						data-date-format="dd MM yyyy" data-link-field="dtp_input2"
						data-link-format="yyyy-mm-dd">
						<input class="form-control" size="16" type="text" value=""
							readonly="" /> <span class="input-group-addon"><span
							class="glyphicon glyphicon-remove"></span></span> <span
							class="input-group-addon"><span
							class="glyphicon glyphicon-calendar"></span></span>
					</div>
					<input type="hidden" id="dtp_input2" value="" /><br />
				</div>
				<div class="form-group">
					<label for="dtp_input3" class="col-md-2 control-label">Time
						Picking</label>
					<div class="input-group date form_time col-md-5" data-date=""
						data-date-format="hh:ii" data-link-field="dtp_input3"
						data-link-format="hh:ii">
						<input class="form-control" size="16" type="text" value=""
							readonly="" /> <span class="input-group-addon"><span
							class="glyphicon glyphicon-remove"></span></span> <span
							class="input-group-addon"><span
							class="glyphicon glyphicon-time"></span></span>
					</div>
					<input type="hidden" id="dtp_input3" value="" /><br />
				</div>
			</fieldset>
		</form>
	</div>


	<hr />

	<div class="panel-body" style="padding-bottom: 0px;">
		<div class="panel panel-default">
			<div class="panel-heading">查询条件</div>
			<div class="panel-body">
				<form id="formSearch" class="form-horizontal">
					<div class="form-group" style="margin-top: 15px">
						<label class="control-label col-sm-1"
							for="txt_search_departmentname">部门名称</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								id="txt_search_departmentname" />
						</div>
						<label class="control-label col-sm-1" for="txt_search_statu">状态</label>
						<div class="col-sm-3">
							<input type="text" class="form-control" id="txt_search_statu" />
						</div>
						<div class="col-sm-4" style="text-align: left;">
							<button type="button" style="margin-left: 50px" id="btn_query"
								class="btn btn-primary">查询</button>
						</div>
					</div>
				</form>
			</div>
		</div>

		<div id="toolbar" class="btn-group">
			<button id="btn_add" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
			</button>
			<button id="btn_edit" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
			</button>
			<button id="btn_delete" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
			</button>
		</div>
		<table id="tb_departments"></table>
	</div>
</body>
<script type="text/javascript" src="/js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="/js/bootstrap.js"></script>
<!-- 日期控件 -->
<script type="text/javascript"
	src="/js/datepicker/bootstrap-datetimepicker.min.js" charset="UTF-8"></script>
<script type="text/javascript"
	src="/js/datepicker/locales/bootstrap-datetimepicker.zh-CN.js"
	charset="UTF-8"></script>
<!-- 表格控件 -->
<script type="text/javascript" src="/js/table/bootstrap-table.min.js"
	charset="UTF-8"></script>
<script type="text/javascript"
	src="/js/table/locale/bootstrap-table-zh-CN.min.js" charset="UTF-8"></script>
<script type="text/javascript" src="/js/dialog/bootstrap-dialog.js"
	charset="UTF-8"></script>

<script>
	$('.form_datetime').datetimepicker({
		language : 'zh-CN',
		weekStart : 1,
		todayBtn : 1,
		autoclose : 1,
		todayHighlight : 1,
		startView : 2,
		forceParse : 0,
		showMeridian : 1
	});
	$('.form_date').datetimepicker({
		language : 'zh-CN',
		weekStart : 1,
		todayBtn : 1,
		autoclose : 1,
		todayHighlight : 1,
		startView : 2,
		minView : 2,
		forceParse : 0
	});
	$('.form_time').datetimepicker({
		language : 'zh-CN',
		weekStart : 1,
		todayBtn : 1,
		autoclose : 1,
		todayHighlight : 1,
		startView : 1,
		minView : 0,
		maxView : 1,
		forceParse : 0
	});

	$(function() {

		//1.初始化Table
		var oTable = new TableInit();
		oTable.Init();

		//2.初始化Button的点击事件
		var oButtonInit = new ButtonInit();
		oButtonInit.Init();

	});

	var TableInit = function() {
		var oTableInit = new Object();
		//初始化Table
		oTableInit.Init = function() {
			$('#tb_departments').bootstrapTable(
					{
						url : '/Test/table', //请求后台的URL（*）
						method : 'get', //请求方式（*）
						toolbar : '#toolbar', //工具按钮用哪个容器
						striped : true, //是否显示行间隔色
						cache : false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
						pagination : true, //是否显示分页（*）
						sortable : false, //是否启用排序
						sortOrder : "asc", //排序方式
						queryParams : oTableInit.queryParams,//传递参数（*）
						sidePagination : "server", //分页方式：client客户端分页，server服务端分页（*）
						pageNumber : 1, //初始化加载第一页，默认第一页
						pageSize : 10, //每页的记录行数（*）
						pageList : [ 10, 25, 50, 100 ], //可供选择的每页的行数（*）
						search : true, //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
						strictSearch : true,
						singleSelect : false, //单选
						showColumns : true, //是否显示所有的列
						showRefresh : true, //是否显示刷新按钮
						minimumCountColumns : 2, //最少允许的列数
						clickToSelect : true, //是否启用点击选中行
						height : 500, //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
						uniqueId : "id", //每一行的唯一标识，一般为主键列
						showToggle : true, //是否显示详细视图和列表视图的切换按钮
						cardView : false, //是否显示详细视图
						detailView : false,
						onLoadSuccess : function() {
							console.log("加载成功");
						},

						onLoadError : function() {
							console.log("加载失败");
						},
						//是否显示父子表
						columns : [
								{
									checkbox : true
								},
								{
									field : 'name',
									title : '部门名称',
									align : 'center',
									visible : true,
									formatter : function(value, row, index) {
										console.log(row)
										return '<span style="color:#f00;">'
												+ value + '</span>';
									}
								}, {
									field : 'parentName',
									title : '上级部门'
								}, {
									field : 'level',
									title : '部门级别'
								}, {
									field : 'desc',
									title : '描述'
								}, ]
					});
		};

		//得到查询的参数
		oTableInit.queryParams = function(params) {
			var temp = { //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
				limit : params.limit, //页面大小
				offset : params.offset, //页码
				departmentname : $("#txt_search_departmentname").val(),
				statu : $("#txt_search_statu").val()
			};
			return temp;
		};
		return oTableInit;
	};

	function dd() {
		var selects = $('#tb_departments').bootstrapTable('getSelections');
		alert(JSON.stringify(selects));
	}
	//点击获取选择的列
	$(function() {
		$("#btn_edit").click(function() {
			//BootstrapDialog.alert("hello");
			/*BootstrapDialog.show({
				title : 'Say-hello dialog',
				message : 'Hi Apple!'
			});*/
			BootstrapDialog.show({
				title : 'Default Title',
				message : $("#h3").show(),
				draggable:true,
				buttons : [ {
					label : 'Message 1',
					action : function(dialog) {
						dialog.setMessage('Message 1');
					}
				}, {
					label : 'Message 2',
					action : function(dialog) {
						dialog.setMessage('Message 2');
					}
				} ]
			});
			//dd();
		});
	});
	var ButtonInit = function() {
		var oInit = new Object();
		var postdata = {};

		oInit.Init = function() {
			//初始化页面上面的按钮事件
		};

		return oInit;
	};
</script>
</html>